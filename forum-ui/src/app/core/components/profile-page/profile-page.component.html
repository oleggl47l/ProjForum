<tui-loader [showLoader]="isLoading()" class="profile-loader">
  <div class="profile-container">
    <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã -->
    <div class="profile-header">
      <div class="header-content">
        <h1 class="profile-title">–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</h1>
        <p class="profile-subtitle">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–∞—à–∏–º –ø—Ä–æ—Ñ–∏–ª–µ–º –∏ –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º</p>
      </div>

      @if (userData()) {
        <div class="user-header-info">
          <div class="user-avatar-wrapper">
            <div class="user-avatar">
              {{ userData()!.userName!.charAt(0) }}
            </div>
            <div class="user-status-indicator" [class.active]="userData()?.active"></div>
          </div>
          <div class="user-info-short">
            <h2 class="user-name">{{ userData()!.userName }}</h2>
            <div class="user-email">{{ userData()?.email }}</div>
          </div>
        </div>
      }
    </div>

    <!-- –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ -->
    @if (errorMessage()) {
      <div class="error-notification">
        {{ errorMessage() }}
      </div>
    }

    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
    <div class="profile-content">
      <!-- –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å —Å –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π -->
      <div class="sidebar">
        <nav class="sidebar-nav">
          <button
            class="nav-item"
            [class.active]="activeItemIndex() === 0"
            (click)="onActiveItemIndexChange(0)"
          >
            <span class="nav-text">–ü—Ä–æ—Ñ–∏–ª—å</span>
          </button>
          <button
            class="nav-item"
            [class.active]="activeItemIndex() === 1"
            (click)="onActiveItemIndexChange(1)"
          >
            <span class="nav-text">–ú–æ–∏ –ø–æ—Å—Ç—ã</span>
          </button>
          <div class="nav-divider"></div>
          <button
            class="nav-item logout-item"
            (click)="onLogout()"
            [disabled]="isLoading()"
          >
            <span class="nav-text">
              @if (isLoading()) {
                –í—ã—Ö–æ–¥...
              } @else {
                –í—ã–π—Ç–∏
              }
            </span>
          </button>
        </nav>
      </div>

      <!-- –û—Å–Ω–æ–≤–Ω–∞—è –æ–±–ª–∞—Å—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç–∞ -->
      <div class="main-content">
        <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –≤–∫–ª–∞–¥–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è -->
        @if (activeItemIndex() === 0 && userData()) {
          <div class="profile-tab-content">
            <div class="profile-card">
              <div class="card-header">
                <h2 class="card-title">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ—Ñ–∏–ª–µ</h2>
                <div class="card-subtitle">–û—Å–Ω–æ–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤–∞—à–µ–π —É—á–µ—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏</div>
              </div>

              <div class="info-grid">
                <div class="info-card">
                  <div class="info-card-header">
                    <h3 class="info-card-title">–õ–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</h3>
                  </div>
                  <div class="info-card-content">
                    <div class="info-row">
                      <span class="info-label">–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</span>
                      <span class="info-value">{{ userData()?.userName }}</span>
                    </div>
                    <div class="info-row">
                      <span class="info-label">Email</span>
                      <span class="info-value">{{ userData()?.email }}</span>
                    </div>
                  </div>
                </div>

                <div class="info-card">
                  <div class="info-card-header">
                    <span class="info-card-icon">üîí</span>
                    <h3 class="info-card-title">–°—Ç–∞—Ç—É—Å –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å</h3>
                  </div>
                  <div class="info-card-content">
                    <div class="info-row">
                      <span class="info-label">–°—Ç–∞—Ç—É—Å –∞–∫–∫–∞—É–Ω—Ç–∞</span>
                      <div class="info-value">
                        <span class="status-badge" [class.active]="userData()?.active">
                          {{ userData()?.active ? '–ê–∫—Ç–∏–≤–µ–Ω' : '–ù–µ–∞–∫—Ç–∏–≤–µ–Ω' }}
                        </span>
                      </div>
                    </div>
                    @if (userData()?.roles && userData()!.roles!.length > 0) {
                      <div class="info-row">
                        <span class="info-label">–†–æ–ª–∏</span>
                        <div class="roles-container">
                          @for (role of userData()!.roles; track role) {
                            <span class="role-tag">{{ role }}</span>
                          }
                        </div>
                      </div>
                    }
                  </div>
                </div>

                <div class="info-card stats-card">
                  <div class="info-card-header">
                    <h3 class="info-card-title">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
                  </div>
                  <div class="info-card-content">
                    <div class="stats-grid">
                      <div class="stat-item">
                        <div class="stat-value">{{ posts().length }}</div>
                        <div class="stat-label">–í—Å–µ–≥–æ –ø–æ—Å—Ç–æ–≤</div>
                      </div>
                      <div class="stat-item">
                        <div class="stat-value">0</div>
                        <div class="stat-label">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤</div>
                      </div>
                      <div class="stat-item">
                        <div class="stat-value">100%</div>
                        <div class="stat-label">–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å</div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        }

        <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –≤–∫–ª–∞–¥–∫–∏ –ø–æ—Å—Ç–æ–≤ -->
        @if (activeItemIndex() === 1) {
          <div class="posts-tab-content">
            <div class="posts-header">
              <h2 class="posts-title">–ú–æ–∏ –ø–æ—Å—Ç—ã</h2>
              <div class="posts-actions">
                <button tuiButton size="s" class="new-post-button" disabled>
                  + –ù–æ–≤—ã–π –ø–æ—Å—Ç
                </button>
              </div>
            </div>

            <div class="posts-notification">
              <div class="notification-icon">üí°</div>
              <div class="notification-content">
                <h4>–§—É–Ω–∫—Ü–∏—è –ø–æ—Å—Ç–æ–≤ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ</h4>
                <p>–°–∫–æ—Ä–æ –∑–¥–µ—Å—å –≤—ã —Å–º–æ–∂–µ—Ç–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ —É–ø—Ä–∞–≤–ª—è—Ç—å —Å–≤–æ–∏–º–∏ –ø–æ—Å—Ç–∞–º–∏. –ú—ã —Ä–∞–±–æ—Ç–∞–µ–º –Ω–∞–¥ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π —Å API.</p>
              </div>
            </div>

            <div class="posts-list-container">
              <div class="posts-list">
                @for (post of posts(); track post.id) {
                  <div class="post-card">
                    <div class="post-header">
                      <div class="post-meta">
                        <h3 class="post-title">{{ post.title }}</h3>
                        <div class="post-date">{{ post.date }}</div>
                      </div>
                      <div class="post-actions">
                        <button tuiButton size="xs" appearance="flat" disabled>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
                        <button tuiButton size="xs" appearance="flat" class="delete-button" disabled>–£–¥–∞–ª–∏—Ç—å</button>
                      </div>
                    </div>
                    <div class="post-content">
                      {{ post.content }}
                    </div>
                    <div class="post-footer">
                      <div class="post-stats">
                        <span class="stat">üëÅÔ∏è‚Äçüó®Ô∏èÔ∏è 0 –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤</span>
                        <span class="stat">üí¨ 0 –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤</span>
                        <span class="stat">‚ù§Ô∏è 0 –ª–∞–π–∫–æ–≤</span>
                      </div>
                      <div class="post-status">
                        <span class="status-draft">–ß–µ—Ä–Ω–æ–≤–∏–∫</span>
                      </div>
                    </div>
                  </div>
                }
              </div>

              <!-- –ü–æ–¥—Å–∫–∞–∑–∫–∞ –ø—Ä–∏ –ø—É—Å—Ç–æ–º —Å–ø–∏—Å–∫–µ -->
              @if (posts().length === 0) {
                <div class="empty-posts">
                  <div class="empty-icon">üìù</div>
                  <h3>–ü–æ—Å—Ç–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç</h3>
                  <p>–°–æ–∑–¥–∞–π—Ç–µ —Å–≤–æ–π –ø–µ—Ä–≤—ã–π –ø–æ—Å—Ç, —á—Ç–æ–±—ã –ø–æ–¥–µ–ª–∏—Ç—å—Å—è –º—ã—Å–ª—è–º–∏ —Å —Å–æ–æ–±—â–µ—Å—Ç–≤–æ–º</p>
                  <button tuiButton size="m" class="create-first-post" disabled>
                    –°–æ–∑–¥–∞—Ç—å –ø–µ—Ä–≤—ã–π –ø–æ—Å—Ç
                  </button>
                </div>
              }
            </div>
          </div>
        }
      </div>
    </div>
  </div>
</tui-loader>
